var WeixinApi=(function(){function j(n,m){m=m||{};var o=function(p){WeixinJSBridge.invoke("shareTimeline",{appid:p.appId?p.appId:"",img_url:p.imgUrl,link:p.link,desc:p.title,title:p.desc,img_width:"120",img_height:"120"},function(q){switch(q.err_msg){case"share_timeline:cancel":m.cancel&&m.cancel(q);break;case"share_timeline:confirm":case"share_timeline:ok":m.confirm&&m.confirm(q);break;case"share_timeline:fail":default:m.fail&&m.fail(q);break}m.all&&m.all(q)})};WeixinJSBridge.on("menu:share:timeline",function(p){if(m.async&&m.ready){window._wx_loadedCb_=m.dataLoaded||new Function();if(window._wx_loadedCb_.toString().indexOf("_wx_loadedCb_")>0){window._wx_loadedCb_=new Function()}m.dataLoaded=function(q){window._wx_loadedCb_(q);o(q)};m.ready&&m.ready(p)}else{m.ready&&m.ready(p);o(n)}})}function i(n,m){m=m||{};var o=function(p){WeixinJSBridge.invoke("sendAppMessage",{appid:p.appId?p.appId:"",img_url:p.imgUrl,link:p.link,desc:p.desc,title:p.title,img_width:"120",img_height:"120"},function(q){switch(q.err_msg){case"send_app_msg:cancel":m.cancel&&m.cancel(q);break;case"send_app_msg:confirm":case"send_app_msg:ok":m.confirm&&m.confirm(q);break;case"send_app_msg:fail":default:m.fail&&m.fail(q);break}m.all&&m.all(q)})};WeixinJSBridge.on("menu:share:appmessage",function(p){if(m.async&&m.ready){window._wx_loadedCb_=m.dataLoaded||new Function();if(window._wx_loadedCb_.toString().indexOf("_wx_loadedCb_")>0){window._wx_loadedCb_=new Function()}m.dataLoaded=function(q){window._wx_loadedCb_(q);o(q)};m.ready&&m.ready(p)}else{m.ready&&m.ready(p);o(n)}})}function k(n,m){m=m||{};var o=function(p){WeixinJSBridge.invoke("shareWeibo",{content:p.desc,url:p.link},function(q){switch(q.err_msg){case"share_weibo:cancel":m.cancel&&m.cancel(q);break;case"share_weibo:confirm":case"share_weibo:ok":m.confirm&&m.confirm(q);break;case"share_weibo:fail":default:m.fail&&m.fail(q);break}m.all&&m.all(q)})};WeixinJSBridge.on("menu:share:weibo",function(p){if(m.async&&m.ready){window._wx_loadedCb_=m.dataLoaded||new Function();if(window._wx_loadedCb_.toString().indexOf("_wx_loadedCb_")>0){window._wx_loadedCb_=new Function()}m.dataLoaded=function(q){window._wx_loadedCb_(q);o(q)};m.ready&&m.ready(p)}else{m.ready&&m.ready(p);o(n)}})}function a(m,n){n=n||{};WeixinJSBridge.invoke("addContact",{webtype:"1",username:m},function(o){var p=!o.err_msg||"add_contact:ok"==o.err_msg||"add_contact:added"==o.err_msg;if(p){n.success&&n.success(o)}else{n.fail&&n.fail(o)}})}function f(m,n){if(!m||!n||n.length==0){return}WeixinJSBridge.invoke("imagePreview",{current:m,urls:n})}function g(){WeixinJSBridge.call("showOptionMenu")}function d(){WeixinJSBridge.call("hideOptionMenu")}function h(){WeixinJSBridge.call("showToolbar")}function e(){WeixinJSBridge.call("hideToolbar")}function c(m){if(m&&typeof m=="function"){WeixinJSBridge.invoke("getNetworkType",{},function(n){m(n.err_msg)})}}function b(){WeixinJSBridge.call("closeWindow")}function l(n){if(n&&typeof n=="function"){var m=this;var o=function(){n(m)};if(typeof window.WeixinJSBridge=="undefined"){if(document.addEventListener){document.addEventListener("WeixinJSBridgeReady",o,false)}else{if(document.attachEvent){document.attachEvent("WeixinJSBridgeReady",o);document.attachEvent("onWeixinJSBridgeReady",o)}}}else{o()}}}return{version:"1.9",ready:l,shareToTimeline:j,shareToWeibo:k,shareToFriend:i,addContact:a,showOptionMenu:g,hideOptionMenu:d,showToolbar:h,hideToolbar:e,getNetworkType:c,imagePreview:f,closeWindow:b}})();